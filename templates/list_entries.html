{% extends "base.html" %}
{% block body %}
{% if session.logged_in %}
<aside>
<form action="{{ url_for('add_entry') }}" method="POST" class="add_entry">
  <div class="field">
    <label for="title">Title</label>
    <input type="text" size="30" name="title" id="title"/>
  </div>
  <div class="field">
    <label for="text">Text</label>
    <textarea name="text" id="text" rows="5" cols="80"></textarea>
  </div>
  <div class="control_row">
    <input type="submit" value="Share" name="Share"/>
  </div>
</form>
</aside>
{% endif %}
  <h2>Entries</h2>
  {% for entry in entries %}
  <article class="entry" id="entry={{entry.id}}">
    <h3>{{ entry.title }}</h3>
    <p class="dateline">{{ entry.created.strftime('%b. %d, %Y') }}
    <div class="entry_body">
      {{ entry.text|safe }}
    </div>
    {% if session.logged_in %}
    <form action="{{ url_for('edit_post', post_id=entry.id) }}" method="LINK">
    <div class="control_row">
      <input type="submit" name="Edit" value="Edit"/>
    </div>
    </form>
    <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-text="{{entry.title}}" data-url="{{url_for('view_post', post_id=entry.id, _external=True)}}">Tweet</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    {% endif %}
  </article>
  {% else %}
  <div class="entry">
    <p><em>No entries here so far</em></p>
  </div>
  {% endfor %}
{% endblock %}